function appendEcommerceLabel(){let e='<div class="twbb-sg-recommended-ecommerce-label">'+twbb_sg_embed.ecommerce_label+"</div>";jQuery(".twbb-sg-recommended-ecommerce").each((function(){jQuery(this).append(e)}))}function add_element_to_section_template_iframe(e,t,n){e.find(t).length||jQuery(e).append(n)}function set_content_generation_status(){let e=window.parent.jQuery(".twbb-generate-section_description").val(),t=twbb_sg_embed.business_description;e||t?jQuery("body").hasClass("twbb-sg-with-description")||jQuery("body").addClass("twbb-sg-with-description"):jQuery("body").hasClass("twbb-sg-with-description")&&jQuery("body").removeClass("twbb-sg-with-description")}function twbb_insert_section(e,t="generate_content"){var n=jQuery("#twbb-sg-loading").html();if(jQuery("body").hasClass("twbb-some-section-in-process")||e.hasClass("twbb-the-sections-generation-in-process")||window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container").hasClass("twbb-some-section-in-process"))return;let s,o,i,a=window.parent.jQuery("#elementor-preview-iframe").contents(),r=-1,b="",c="";if(c=window.parent.jQuery(".twbb-sg-sidebar-navigator-menu-li.twbb-sg-navigation-item.selected").attr("data-type"),s=e.attr("id"),o=s.replace("twbb-sg-section-",""),b=window.parent.jQuery(".twbb-generate-section_description").val(),a.find(".elementor-add-section:not(#elementor-add-new-section)").length&&(r=a.find(".elementor-add-section:not(#elementor-add-new-section)").index()),"generate_content"!==t||o.indexOf("ai-generated-sections/ai_generated")>=0||(window.parent.twbb_generate_with_ai_navigation_tab_status("disable"),e.addClass("twbb-the-sections-generation-in-process"),jQuery("body").addClass("twbb-some-section-in-process"),window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container .twbb-sg-sidebar-navigated-content iframe").each((function(){jQuery(this).contents().find("body").addClass("twbb-some-section-in-process")})),window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container").addClass("twbb-some-section-in-process"),add_element_to_section_template_iframe(e,".twbb-sg-loading",n)),o.indexOf("ai-generated-sections/ai_generated")>=0){twbb_send_data_to_analytics(extractSubstring(jQuery(e).attr("class")),"already_generated_content",{unique_id:window.parent.jQuery(".twbb-sg-sidebar-generated-with-ai").attr("data-unique_id")})}else twbb_send_data_to_analytics(o,t);let d=window.parent.collect_data_for_request(r,c,b);i={section_path:o,content_type:t,closest_sections_data:JSON.stringify(d),action:"twbb_get_section_generated_data_for_request",user_description:b,nonce:twbb_sg_embed.twbb_sg_nonce},window.parent.twbb_insert_section_premade(r,i)}function extractSubstring(e){var t=e.match(/ai20-sections[^ ]*/);return t?t[0]:null}function twbb_send_data_to_analytics(e,t,n={}){let s="";"generate_content"===t?s="Insert Section With Generated Content to the page":"dummy_content"===t?s="Insert Section With Dummy Content to the page":"already_generated_content"===t&&(s="Insert Generated Section to the page"),analyticsDataPush(s,"Section Generation",e,n)}jQuery(document).ready((function(){appendEcommerceLabel(),window.parent.jQuery(".twbb-sg-sidebar-navigated-contents-container").hasClass("twbb-some-section-in-process")&&jQuery("body").addClass("twbb-some-section-in-process");var e=jQuery("#twbb-sg-messages").html(),t=jQuery("#twbb-sg-overlay").html();jQuery(document).on("mouseenter",".twbb-sg-each-section",(function(){jQuery(this).addClass("twbb-sg-now-hovered"),add_element_to_section_template_iframe(jQuery(this),".twbb-sg-messages",e),add_element_to_section_template_iframe(jQuery(this),".twbb-sg-overlay",t),set_content_generation_status();var n=jQuery(this);setTimeout((function(){n.hasClass("twbb-sg-now-hovered")&&n.addClass("twbb-sg-hovered")}),2e3)})),jQuery(document).on("mouseleave",".twbb-sg-each-section",(function(){jQuery(this).removeClass("twbb-sg-now-hovered"),jQuery(this).removeClass("twbb-sg-hovered")})),jQuery(document).on("click",".elementor-add-twbb-section-generation-button",(function(){window.parent.jQuery(".twbb-sg-header-button-container").hasClass("selected")||(analyticsDataPush("Add Section","Section Generation","Inline"),window.parent.twbb_trigger_sections_button(window.parent.jQuery(".twbb-sg-header-button-container")))})),jQuery(document).on("click","body:not(.twbb-sg-with-description) .twbb-sg-each-section",(function(){twbb_insert_section(jQuery(this),"dummy_content")})),jQuery(document).on("click","body.twbb-sg-with-description .twbb-sg-add-with-generated-content",(function(){twbb_insert_section(jQuery(this).closest(".twbb-sg-each-section"),"generate_content")})),jQuery(document).on("click","body.twbb-sg-with-description .twbb-sg-add-with-dummy-content,.twbb-sg-each-section[id*=ai-generated-sections]",(function(){twbb_insert_section(jQuery(this).closest(".twbb-sg-each-section"),"dummy_content")})),jQuery(document).on("click",".elementor-editor-element-edit",(function(){window.parent.twbb_animate_sidebar(0)}))}));